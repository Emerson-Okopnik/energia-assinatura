project_name: energia-assinatura
app_domain: app.consorcioliderenergy.com.br
api_domain: api.consorcioliderenergy.com.br
api_base_path: /api
app_user: www-data
frontend_root: /var/www/energia-frontend
app_root: /var/www/energia-assinatura
repository_url: https://github.com/Emerson-Okopnik/energia-assinatura.git
deploy_branch: main
deploy_user: ubuntu

php_version: "8.2"
php_max_execution_time: 600
php_max_input_time: 600

php_fpm_pool_name: www
php_fpm_pool_user: www-data
php_fpm_pool_group: www-data
php_fpm_listen_socket: "/run/php/php{{ php_version }}-fpm.sock"
php_fpm_pm: dynamic
php_fpm_pm_max_children: 20
php_fpm_pm_start_servers: 5
php_fpm_pm_min_spare_servers: 5
php_fpm_pm_max_spare_servers: 10
php_fpm_pm_max_requests: 500
php_fpm_request_terminate_timeout: 60s
php_fpm_access_log: "/var/log/php{{ php_version }}-fpm.access.log"
php_fpm_slow_log: "/var/log/php{{ php_version }}-fpm.slow.log"
php_fpm_request_slowlog_timeout: 10s

db_host: "{{ vault_db_host | default('127.0.0.1', true) }}"
db_port: 5432
db_name: "{{ vault_db_name | default('energia_assinatura', true) }}"
db_username: "{{ vault_db_username | default(lookup('env', 'DB_USERNAME'), true) }}"
db_password: "{{ vault_db_password | default(lookup('env', 'DB_PASSWORD'), true) }}"          # ansible-vault
app_key: "{{ vault_app_key | default(lookup('env', 'APP_KEY'), true) }}"                  # Base64::32 chars
jwt_secret: "{{ vault_jwt_secret | default(lookup('env', 'JWT_SECRET'), true) }}"            # 32+ chars
user_celesc: "{{ vault_user_celesc | default(lookup('env', 'USER_CELESC'), true) }}"  
password_celesc: "{{ vault_password_celesc | default(lookup('env', 'PASSWORD_CELESC'), true) }}"  
queue_connection: database

# Evita reinstalar/atualizar o PostgreSQL local a cada deploy. Ajuste para true
# somente se o host de aplicação também for responsável por gerenciar o banco.
manage_local_postgresql: false

vite_api_url: "https://{{ app_domain }}"
browsershot_chrome_candidates:
  - /usr/bin/google-chrome
  - /usr/bin/google-chrome-stable
  - /usr/bin/chromium
  - /usr/bin/chromium-browser
  - /snap/bin/chromium
browsershot_chrome_path: /usr/bin/google-chrome
browsershot_node_path: /usr/bin/node
browsershot_disable_sandbox: true

letsencrypt_email: emer00k@gmail.com       # opcional

# Secrets armazenados em group_vars/all/vault.yml criptografado
