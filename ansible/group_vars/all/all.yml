project_name: energia-assinatura
app_domain: app.consorcioliderenergy.com.br
api_domain: api.consorcioliderenergy.com.br
api_base_path: /api
app_user: www-data
frontend_root: /var/www/energia-frontend
app_root: /var/www/energia-assinatura
repository_url: https://github.com/Emerson-Okopnik/energia-assinatura.git
deploy_branch: main
deploy_user: ubuntu

php_version: "8.2"
php_max_execution_time: 600
php_max_input_time: 600

php_fpm_pool_name: www
php_fpm_pool_user: www-data
php_fpm_pool_group: www-data
php_fpm_listen_socket: "/run/php/php{{ php_version }}-fpm.sock"
php_fpm_pm: dynamic
php_fpm_pm_max_children: 20
php_fpm_pm_start_servers: 5
php_fpm_pm_min_spare_servers: 5
php_fpm_pm_max_spare_servers: 10
php_fpm_pm_max_requests: 500
php_fpm_request_terminate_timeout: 60s
php_fpm_access_log: "/var/log/php{{ php_version }}-fpm.access.log"
php_fpm_slow_log: "/var/log/php{{ php_version }}-fpm.slow.log"
php_fpm_request_slowlog_timeout: 10s

db_host: "{{ vault_db_host | default(lookup('env', 'RDS_ENDPOINT'), true) }}"
db_port: 5432
db_name: postgres
db_username: "{{vault_db_username | default(lookup('env', 'DB_USERNAME'), true) }}"
db_password: "{{ vault_db_password | default(lookup('env', 'DB_PASSWORD'), true) }}"          # ansible-vault
app_key: "{{ vault_app_key | default(lookup('env', 'APP_KEY'), true) }}"                  # Base64::32 chars
jwt_secret: "{{ vault_jwt_secret | default(lookup('env', 'JWT_SECRET'), true) }}"            # 32+ chars
queue_connection: database

vite_api_url: "https://{{ api_domain }}"
browsershot_chrome_path: >-
  {%- if ansible_distribution == 'Ubuntu' and ansible_distribution_version is version('22.04', '>=') -%}
  /snap/bin/chromium
  {%- elif ansible_distribution == 'Ubuntu' -%}
  /usr/bin/chromium-browser
  {%- else -%}
  /usr/bin/chromium
  {%- endif -%}
browsershot_node_path: /usr/bin/node

letsencrypt_email: emer00k@gmail.com       # opcional

# Secrets armazenados em group_vars/all/vault.yml criptografado
